(function(e){function t(t){for(var n,r,s=t[0],c=t[1],l=t[2],u=0,d=[];u<s.length;u++)r=s[u],i[r]&&d.push(i[r][0]),i[r]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);m&&m(t);while(d.length)d.shift()();return a.push.apply(a,l||[]),o()}function o(){for(var e,t=0;t<a.length;t++){for(var o=a[t],n=!0,r=1;r<o.length;r++){var s=o[r];0!==i[s]&&(n=!1)}n&&(a.splice(t--,1),e=c(c.s=o[0]))}return e}var n={},r={app:0},i={app:0},a=[];function s(e){return c.p+"js/"+({docx:"docx",docx2:"docx2"}[e]||e)+"."+{docx:"f7f801b7",docx2:"1ebf64ea"}[e]+".js"}function c(t){if(n[t])return n[t].exports;var o=n[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,c),o.l=!0,o.exports}c.e=function(e){var t=[],o={docx:1,docx2:1};r[e]?t.push(r[e]):0!==r[e]&&o[e]&&t.push(r[e]=new Promise(function(t,o){for(var n="css/"+({docx:"docx",docx2:"docx2"}[e]||e)+"."+{docx:"cb5dd479",docx2:"22529545"}[e]+".css",i=c.p+n,a=document.getElementsByTagName("link"),s=0;s<a.length;s++){var l=a[s],u=l.getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(u===n||u===i))return t()}var d=document.getElementsByTagName("style");for(s=0;s<d.length;s++){l=d[s],u=l.getAttribute("data-href");if(u===n||u===i)return t()}var m=document.createElement("link");m.rel="stylesheet",m.type="text/css",m.onload=t,m.onerror=function(t){var n=t&&t.target&&t.target.src||i,a=new Error("Loading CSS chunk "+e+" failed.\n("+n+")");a.request=n,delete r[e],m.parentNode.removeChild(m),o(a)},m.href=i;var f=document.getElementsByTagName("head")[0];f.appendChild(m)}).then(function(){r[e]=0}));var n=i[e];if(0!==n)if(n)t.push(n[2]);else{var a=new Promise(function(t,o){n=i[e]=[t,o]});t.push(n[2]=a);var l,u=document.createElement("script");u.charset="utf-8",u.timeout=120,c.nc&&u.setAttribute("nonce",c.nc),u.src=s(e),l=function(t){u.onerror=u.onload=null,clearTimeout(d);var o=i[e];if(0!==o){if(o){var n=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src,a=new Error("Loading chunk "+e+" failed.\n("+n+": "+r+")");a.type=n,a.request=r,o[1](a)}i[e]=void 0}};var d=setTimeout(function(){l({type:"timeout",target:u})},12e4);u.onerror=u.onload=l,document.head.appendChild(u)}return Promise.all(t)},c.m=e,c.c=n,c.d=function(e,t,o){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(c.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)c.d(o,n,function(t){return e[t]}.bind(null,n));return o},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="",c.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],u=l.push.bind(l);l.push=t,l=l.slice();for(var d=0;d<l.length;d++)t(l[d]);var m=u;a.push([0,"chunk-vendors"]),o()})({0:function(e,t,o){e.exports=o("56d7")},"034f":function(e,t,o){"use strict";var n=o("64a9"),r=o.n(n);r.a},"217f":function(e){e.exports={url:"https://zjy.urer.top/-api"}},"2b33":function(e,t,o){"use strict";var n=3104114736;e.exports={appid:n,_config:{appid:n,idName:"v"+(new Date).getTime(),idAudioName:"a"+(new Date).getTime(),nickName:"u"+(new Date).getTime(),server:"wss://wsliveroom"+n+"-api.zego.im:8282/ws",logLevel:2,logUrl:"",remoteLogLevel:0,audienceCreateRoom:!0},_otherConfig:{cgi_token:"",roomlist:"",signal:"",token:"https://wsliveroom-demo.zego.im:8282/token"}}},3428:function(e,t,o){},"4e0a":function(e,t,o){},"56d7":function(e,t,o){"use strict";o.r(t);o("cadf"),o("551c"),o("097d");var n=o("2b0e"),r=o("bc3a"),i=o.n(r),a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"app"}},[o("router-view")],1)},s=[],c={name:"App"},l=c,u=(o("034f"),o("2877")),d=Object(u["a"])(l,a,s,!1,null,null,null),m=d.exports,f=o("8c4f"),p=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"container"},[e._m(0),o("div",{staticClass:"flex"},[o("div",[o("div",[o("h2",[e._v("加入一场会议")]),o("input",{directives:[{name:"model",rawName:"v-model",value:e.room,expression:"room"}],attrs:{type:"number",placeholder:"会议编号",required:""},domProps:{value:e.room},on:{input:function(t){t.target.composing||(e.room=t.target.value)}}}),o("p",{class:e.validate?"":"error"},[e._v("会议编号是6位数字")]),o("button",{on:{click:e.joinRoom}},[e._v("加入")])])]),o("div",[o("div",[o("h2",[e._v("发起一场会议")]),o("div",{staticClass:"radio"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.video,expression:"video"}],attrs:{type:"radio",id:"open",value:"1"},domProps:{checked:e._q(e.video,"1")},on:{change:function(t){e.video="1"}}}),o("label",{attrs:{for:"open"}},[e._v("视频开启")])]),o("div",{staticClass:"radio"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.video,expression:"video"}],attrs:{type:"radio",id:"close",value:"0"},domProps:{checked:e._q(e.video,"0")},on:{change:function(t){e.video="0"}}}),o("label",{attrs:{for:"close"}},[e._v("视频关闭")])]),o("button",{on:{click:e.createRoom}},[e._v("发起")])])])])])},v=[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"flex-center logo"},[o("img",{attrs:{src:"static/logo.png",alt:""}})])}],h=(o("96cf"),o("3b8d")),g=o("217f"),b={name:"index",data:function(){return{room:"",video:1,validate:!0}},computed:{isSafariOnIphone:function(){var e=window.navigator.userAgent;return-1!=e.indexOf("Safari")&&-1!=e.indexOf("Version")&&-1!=e.indexOf("iPhone")}},methods:{joinRoom:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(){var t,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=/^^[1-9]\d{5}$$/,!t.test(this.room)){e.next=10;break}return e.next=4,this.$http.get("".concat(g.url,"/conference/isRoomExist"),{params:{roomID:this.room}});case 4:if(o=e.sent,o.data){e.next=7;break}return e.abrupt("return",alert("该会议编号（".concat(this.room,"）不存在，请检查一下是否有误？")));case 7:this.$router.push({name:"room",query:{room:this.room},params:{isSafariOnIphone:this.isSafariOnIphone}}),e.next=11;break;case 10:this.validate=!1;case 11:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),createRoom:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(){var t,o,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:o=!0;case 1:if(!o){e.next=10;break}if(t=Math.floor(1e6*Math.random()),!(t>1e5)){e.next=8;break}return e.next=6,this.$http.get("".concat(g.url,"/conference/isRoomExist"),{params:{roomID:t}});case 6:n=e.sent,n.data||(o=!1);case 8:e.next=1;break;case 10:this.$http.post("".concat(g.url,"/conference/addRoom"),{roomID:t,userID:1}),this.$router.push({name:"room",query:{room:t,video:this.video},params:{isSafariOnIphone:this.isSafariOnIphone}});case 12:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()}},w=b,x=(o("c1ce"),Object(u["a"])(w,p,v,!1,null,"aab11b16",null)),y=x.exports,S=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"container flex"},[o("div",{staticClass:"room",class:e.lengthOfRemoteVideo<=3?"":"scroll"},[o("div",{staticClass:"video flex-center",class:e.previewVideo?"":"opacity55"},[o("video",{directives:[{name:"show",rawName:"v-show",value:e.previewVideo,expression:"previewVideo"}],attrs:{id:"previewVideo",muted:"",autoplay:"",playsinline:"",controls:""},domProps:{muted:!0}})]),e._l(e.remoteVideo,function(t,n){return o("div",{directives:[{name:"show",rawName:"v-show",value:n<e.lengthOfRemoteVideo,expression:"i<lengthOfRemoteVideo"}],key:n,staticClass:"video flex-center",class:t?"":"opacity55"},[o("video",{directives:[{name:"show",rawName:"v-show",value:t,expression:"r"}],staticClass:"remoteVideo",attrs:{autoplay:"",playsinline:"",controls:""}})])})],2),o("div",{staticClass:"bottom"},[o("div",[o("div",{on:{click:e.toggleCamera}},[o("img",{attrs:{src:"static/camera.png",alt:""}}),o("div",{staticClass:"circle"},[o("i",{class:e.enableCamera?"green":"red"}),e._v("\n                    "+e._s(e.enableCamera?"关闭视频":"开启视频")+"\n                ")])]),o("div",{on:{click:e.toggleMic}},[o("img",{attrs:{src:"static/mic.png",alt:""}}),o("div",{staticClass:"circle"},[o("i",{class:e.enableMic?"green":"red"}),e._v("\n                    "+e._s(e.enableMic?"关闭声音":"开启声音")+"\n                ")])]),e.isSupportShareScreen?o("div",{on:{click:e.toggleScreen}},[o("img",{attrs:{src:"static/screen"+(e.enableScreen?"-dis":"")+".png",alt:""}}),e._v("\n                "+e._s(e.enableScreen?"关闭分享":"屏幕分享")+"\n            ")]):e._e()]),o("div",[o("div",{on:{click:e.copyToClipboard}},[o("img",{attrs:{src:"static/link.png",alt:""}}),e._v("\n                复制链接\n            ")]),e._m(0),o("div",{staticClass:"red",on:{click:function(t){e.endMeeting()}}},[o("img",{attrs:{src:"static/end-meeting.png",alt:""}}),e._v("\n                结束会议\n            ")]),o("div",[o("span",{staticClass:"flex-center"},[e._v(e._s(e.room))]),e._v("\n                会议编号\n            ")])]),o("div",{staticClass:"none"},[o("audio",{attrs:{id:"screenAudio",autoplay:"",muted:"",playsinline:""}}),e._l(e.remoteVideo,function(e,t){return o("audio",{key:t,staticClass:"remoteAudio",attrs:{autoplay:"",playsinline:""}})})],2)])])},_=[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("img",{attrs:{src:"static/invite.png",alt:""}}),e._v("\n                邀请朋友\n            ")])}],C=o("f499"),k=o.n(C),O=(o("ac6a"),o("2b33"));function P(){var e=window.navigator.userAgent,t=void 0!=window.ActiveXObject&&-1!=e.indexOf("MSIE"),o=-1!=e.indexOf("Firefox"),n=void 0!=window.opr,r=e.indexOf("Chrome")&&window.chrome,i=-1!=e.indexOf("Safari")&&-1!=e.indexOf("Version");return t?"IE":o?"Firefox":n?"Opera":r?"Chrome":i?"Safari":"Unkown"}function A(){for(var e=navigator.userAgent,t=new Array("Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"),o=!0,n=0;n<t.length;n++)if(e.indexOf(t[n])>0){o=!1;break}return o}function R(){M.enumDevices(function(e){console.log("enumDevices",e),$=e},function(e){console.error("enum device error: "+e)})}var M,j,N,V,I,E,$,T,q,D=O._config,F=O._otherConfig,z=!1,B=!1,U=[],L=[];function Z(){console.info("leave room  and close stream"),B&&(M.stopPreview(j),M.stopPublishingStream(D.idName),B=!1);for(var e=0;e<U.length;e++)M.stopPlayingStream(U[e].stream_id);for(var t=0;t<L.length;t++)M.stopPlayingStream(L[t].stream_id);U=[],L=[],M.logout()}function J(){var e={onStreamUpdated:function(e,t){if(console.log("onStreamUpdated",e,t),0==e){for(var o=U.length,n=L.length,r=0,i=0,a=0;a<t.length;a++)console.info(t[a].stream_id+" was added"),"v"===t[a].stream_id.charAt(0)?(U.push(t[a]),re(t[a].stream_id,V[o+r]),r++):(L.push(t[a]),ie(t[a].stream_id,I[n+i]),i++);q(o+r)}else if(1==e){for(var s=!1,c=0;c<U.length;c++)for(var l=0;l<t.length;l++)if(U[c].stream_id===t[l].stream_id){M.stopPlayingStream(U[c].stream_id),console.info(U[c].stream_id+" was devared"),U.splice(c,1),s=!0;break}s&&G();for(var u=!1,d=0;d<L.length;d++)for(var m=0;m<t.length;m++)if(L[d].stream_id===t[m].stream_id){M.stopPlayingStream(L[d].stream_id),console.info(L[d].stream_id+" was devared"),L.splice(d,1),u=!0;break}u&&K()}}};for(var t in e)M[t]=e[t]}function Q(){M=new window.ZegoClient,M.setUserStateUpdate(!0),console.log(D),M.config(D),R(),J()}function W(e,t,o,n,r,a,s){j=o,V=n,I=r,T=a,q=s,e?(E&&M.stopScreenShot(),i.a.get(F.token,{params:{app_id:D.appid,id_name:D.idName,cgi_token:F.cgi_token}}).then(function(o){console.log("gettoken success"),H(e,o.data,t)})):alert("请输入房间号")}function H(e,t,o){M.login(e,o,t,function(e){console.log("login success"),Y(e,o)},function(e){X(e)})}function X(e){alert("登录失败"),console.error(e)}function G(){for(var e=U.length,t=0;t<e;t++)M.stopPlayingStream(U[t].stream_id);for(var o=0;o<e;o++)re(U[o].stream_id,V[o]);q(e)}function K(){for(var e=L.length,t=0;t<e;t++)M.stopPlayingStream(L[t].stream_id);for(var o=0;o<e;o++)ie(L[o].stream_id,I[o])}function Y(e,t){var o=20;if(e.length>=o)return alert("房间太拥挤，换一个吧！"),void Z();e.forEach(function(e){"v"===e.stream_id.charAt(0)?U.push(e):L.push(e)}),G(),K(),console.log("login success"),z=!0,1===t&&ee()}function ee(e){var t=2,o={audio:!0,audioInput:$.microphones[0].deviceId||null,video:!0,facingMode:"user",videoQuality:1*t,horizontal:!0,externalCapture:!1,externalMediaStream:null};o=n["a"].util.extend(o,e),console.log("previewConfig",o);var r=M.startPreview(j,o,function(){console.log("preview success"),T(),B=!0,oe(),R()},function(e){alert(k()(e)),console.error("preview failed",e)});r||alert("预览失败！")}function te(e){var t=2,o={audio:!0,audioInput:$.microphones[0].deviceId||null,video:!1,videoInput:$.cameras[0].deviceId||null,videoQuality:1*t,horizontal:!0,externalCapture:!1,externalMediaStream:null};o=n["a"].util.extend(o,e),console.log("previewConfig",o),N=document.getElementById("screenAudio"),N.muted=!0;var r=M.startPreview(N,o,function(){console.log("preview audio success"),ne()},function(e){alert(k()(e)),console.error("preview failed",e)});r||alert("预览失败！")}function oe(){M.startPublishingStream(D.idName,j)}function ne(){M.startPublishingStream(D.idAudioName,N)}function re(e,t){var o=M.startPlayingStream(e,t);t.muted=!1,o||(alert("哎呀，播放失败啦"),t.style="display:none")}function ie(e,t){var o=M.startPlayingStream(e,t,null,{playType:"audio"});t.muted=!1,o||(alert("哎呀，播放失败啦"),t.style="display:none")}function ae(e){M.enableCamera(j,e)}function se(e){M.enableMicrophone(j,e)}var ce=A()&&("Chrome"===P()||"Firefox"===P());function le(e){e?(z&&M.stopPublishingStream(D.idName),z&&M.stopPreview(j),"Firefox"===P()&&M.startScreenShotFirFox("window",!1,function(e,t){console.log("startScreenShot:"+e),E=e,j.srcObject=t,z&&(ee({externalMediaStream:null,width:640,height:480,frameRate:15,bitRate:1e3}),te({audio:!1}))}),"Chrome"===P()&&M.startScreenShotChrome(function(e,t){console.log("startScreenShot:"+e),E=e,j.srcObject=t,z&&(ee({externalCapture:!0,audio:!1}),te())})):(M.stopScreenShot(),M.stopPreview(j),M.stopPublishingStream(D.idName),ee(),M.stopPreview(N),M.stopPublishingStream(D.idAudioName))}console.log("sdk version is",window.ZegoClient.getCurrentVersion()),window.ZegoClient.isSupportWebrtc()?window.ZegoClient.isSupportH264(function(e){Q(),e||alert("浏览器不支持视频h264编码，不能推拉音频流")},function(e){console.error(e)}):alert("浏览器不支持webrtc，换一个浏览器试试吧");var ue={zg:M,openRoom:W,enableCamera:ae,enableMicrophone:se,isSupportShareScreen:ce,enableScreen:le,leaveRoom:Z},de=o("217f"),me={name:"room",data:function(){return{previewVideo:!1,remoteVideo:[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],lengthOfRemoteVideo:0,enableCamera:!0,enableMic:!0,enableScreen:!1}},beforeCreate:function(){this.$route.params.isSafariOnIphone&&location.reload(!0)},mounted:function(){var e=this;ue.openRoom(this.room,1,document.getElementById("previewVideo"),document.querySelectorAll(".remoteVideo"),document.querySelectorAll(".remoteAudio"),function(){e.previewVideo=!0,"0"===e.$route.query.video&&e.toggleCamera()},function(t){e.lengthOfRemoteVideo=t;for(var o=0;o<e.remoteVideo.length;o++)e.remoteVideo.splice(o,1,o<t)})},computed:{room:function(){return this.$route.query.room+""},isSupportShareScreen:function(){return ue.isSupportShareScreen}},methods:{toggleCamera:function(){this.enableCamera=!this.enableCamera,ue.enableCamera(this.enableCamera)},toggleMic:function(){this.enableMic=!this.enableMic,ue.enableMicrophone(this.enableMic)},toggleScreen:function(){this.enableScreen=!this.enableScreen,ue.enableScreen(this.enableScreen)},copyToClipboard:function(){var e="您好，快来加入视频会议吧，我在这儿等你："+location.origin+"#/room?room="+this.room,t=document.createElement("textarea");t.value=e,t.setAttribute("readonly",""),t.style.position="absolute",t.style.left="-9999px",document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t),alert("会议的链接已经复制到剪贴板，请通过邮件，微信等发送给他人即可加入该会议。")},endMeeting:function(){ue.leaveRoom(),this.lengthOfRemoteVideo||this.$http.post("".concat(de.url,"/conference/removeRoom"),{roomID:this.room,userID:1}),this.$router.push({name:"index"})}}},fe=me,pe=(o("ed86"),Object(u["a"])(fe,S,_,!1,null,"ecf7cf7c",null)),ve=pe.exports;n["a"].use(f["a"]);var he=new f["a"]({mode:"hash",base:"",routes:[{path:"/",name:"index",component:y},{path:"/room",name:"room",component:ve},{path:"/docx",name:"docx",component:function(){return o.e("docx").then(o.bind(null,"10e2"))}},{path:"/docx2",name:"docx2",component:function(){return o.e("docx2").then(o.bind(null,"1a6d"))}}]}),ge=o("9483");Object(ge["a"])("".concat("","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});o("e008");n["a"].config.productionTip=!1,n["a"].prototype.$http=i.a,new n["a"]({router:he,render:function(e){return e(m)}}).$mount("#app")},"64a9":function(e,t,o){},c1ce:function(e,t,o){"use strict";var n=o("3428"),r=o.n(n);r.a},e008:function(e,t,o){},ed86:function(e,t,o){"use strict";var n=o("4e0a"),r=o.n(n);r.a}});
//# sourceMappingURL=app.64ae63a6.js.map